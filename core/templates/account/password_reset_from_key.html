{% extends "base.html" %}
{% load static %}
{% load i18n %}
{% block head_title %}{% trans "Change Password" %}{% endblock %}

{% block content %}
{% if token_fail %}
{% url 'account_reset_password' as passwd_reset_url %}
<p>{% blocktrans %}The password reset link was invalid, possibly because it has already been used. Please request a <a
        href="{{ passwd_reset_url }}">new password reset</a>.{% endblocktrans %}</p>
{% else %}
{% if form %}
<div style="background-image: url('{% static '/media/hero-bg.d4e4dfc41568f51250f8.jpg' %}'); height: 100vh;">
    <div class="fixed inset-0 z-10 flex items-center justify-center bg-black bg-opacity-50">
        <div class="form-container flex justify-center items-center h-full">
            <div class="w-full max-w-4xl">
                <div class="bg-white rounded-lg shadow-xl text-black">
                    <div class="flex flex-wrap">
                        <div class="w-full">
                            <div class="p-8 md:p-12">
                                <div class="text-center">
                                    <img src="https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-login-form/lotus.webp"
                                        class="w-48 mx-auto" alt="logo" />
                                    <h4 className="mt-4 mb-6 pb-2">{% if token_fail %}{% trans "Bad Token" %}{% else
                                        %}{% trans "Change Password" %}{% endif %}</h4>
                                </div>
                                <form method="POST" action="{{ action_url }}">
                                    {% csrf_token %}
                                    {% if form.non_field_errors %}
                                    <div class="error-message">
                                        {{ form.non_field_errors }}
                                    </div>
                                    {% endif %}
                                    <div class="form-group mb-4">
                                        <label for="id_password1">{% trans "New Password" %}</label>
                                        <input type="password" name="password1" id="id_password1"
                                            class="form-input w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-600"
                                            required>
                                        {% if form.password1.errors %}
                                        <div class="error-message text-red-500">
                                            {{ form.password1.errors }}
                                        </div>
                                        {% endif %}
                                    </div>
                                    <div class="form-group mb-4">
                                        <label for="id_password2">{% trans "Confirm New Password" %}</label>
                                        <input type="password" name="password2" id="id_password2"
                                            class="form-input w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-600"
                                            required>
                                    </div>
                                    <input
                                        class="w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-600 mb-3"
                                        type="submit" name="action" value="{% trans 'change password' %}" />
                                    {% if form.password2.errors %}
                                    <div class="error-message text-red-500">
                                        {{ form.password2.errors }}
                                    </div>
                                    {% endif %}
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% else %}
<p>{% trans 'Your password is now changed.' %}</p>
{% endif %}
{% endif %}
{% endblock %}